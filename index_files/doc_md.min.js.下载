(function(){function m(a){for(i=0;i<a.length;i++){var b=a[i];if(!1!==b.in_use){b.children&&0<b.children.length?m(b.children):h(b,!0);break}}}function k(){var a=$("#footer").height()?$("#footer").height():0;$("#treelist").css({width:"230px",height:$(window).height()-68-54+"px","padding-top":"10px","margin-left":"-230px","z-index":1E3});$("#terms-title").css({"margin-left":"-230px"});768>$(window).width()?($("#treelist").css({position:"absolute",top:"55px","overflow-y":"inherit","max-height":"inherit",height:"auto","margin-left":0}),$("#terms-title").css({"margin-left":0}),$(".media-terms-list").css({height:$(window).height()-$(".navbarbg").height()-10})):($(document).height(),$(document).scrollTop(),a=$(window).height()+a,68<=$(window).scrollTop()&&($("#treelist").css({position:"fixed","padding-top":"10px",height:a-60}),$("#terms-title").css({position:"fixed","padding-top":"10px"})),68>$(window).scrollTop()&&($("#treelist").css({position:"absolute","padding-top":"10px"}),$("#terms-title").css({position:"absolute","padding-top":"10px"})));$("#treelist").css("overflow-x","hidden")}function n(a){if(a=p(null,a)){g.activateNode(a.id);var b=a.id.split("_"),e=[],d="",c;for(c in b)if(0==c)d=b[c];else if(c==b.length-1)break;else 3<c?(d+="_"+b[c],e.push(d)):d+="_"+b[c];for(c in e)g.toggleNode(e[c]);!0===l?$("#article_title").html(a.text):h(a);l=!0}}function p(a,b,e,d){var c;a||(a=g.getAllNodes());e||(e=[]);for(c=0;c<a.length;c++){var f=a[c];switch(d){case "id":var h=f.id;break;default:h=f.filename}if(h==b)return f;if(f.children&&0<f.children.length&&(e.push(f.id),f=p(f.children,b,e,d)))return f.links=e,f}return null}function h(a,b){window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)?(a.ajax_href=root+a.filename+"README.md",a.url_href="/cn/github/egret-docs"+a.filename+"index.html",q&&(a.url_href+=location.search+location.hash,q=!1),$.ajax({url:a.ajax_href,dataType:"text",success:function(e){-1<e.indexOf("\x3c!DOCTYPE html\x3e")&&(e="## \u8bfb\u53d6MarkDown\u6587\u4ef6\u51fa\u9519");var d=a.text;$("#article_title").html(d);$("#append_article_content").text(e);t(a.filename);$("#doc-user-edit").attr("href","https://github.com/egret-labs/egret-docs/tree/master/"+a.filename);d={action:"page",title:a.text,id:a.tid,content:$("#post_content").html(),url:a.url_href};history.pushState(d,d.title,d.url);document.title=d.title;if(b)return n(a.filename),1;70<Math.max(parseInt($("html,body").scrollTop()),Math.abs(parseInt($("html,body").offset().top)))&&(document.documentElement.scrollTop=70);$("body").scrollTop(70);768>$(window).width()&&($(".media-terms-list").hide(),$(".btn-media-list").css("left",0));location.hash&&setTimeout("location.href \x3d ''+location.hash ;",500)}})):window.location=a.url_href}function t(a){$("#article_content").html("");var b=$("#append_article_content").text();if(a){var e=cdn_path+"egret-docs"+a;a=b.replace(/!\[.*?\]\(.*?\)/g,function(a){if(a.match(/:\/\//g))return a;a=a.split("(");return a[0]+"("+e+a[1]});a=a.replace(/\[.*?\]:.*/g,function(a){if(a.match(/:\/\//g))return a;a=a.split(":");a[1]=a[1].replace(/^\s*/,"");return r=a[0]+": "+e+a[1]});a=a.replace(/\[.*?\]\(.*?\)/g,function(a){return a.replace(/README.md/g,"index.html")})}else a=b.replace(/\[.*?\]\(.*?\)/g,function(a){return a.replace(/README.md/g,"index.html")});editormd.markdownToHTML("article_content",{markdown:a,htmlDecode:!0,tocm:!0,markdownSourceCode:!1,emoji:!0,taskList:!0,tex:!0,flowChart:!0,sequenceDiagram:!0})}var u=function(){var a=JSON.parse(category_c),b;for(b in a){var e=a[b].children,d;for(d in e){var c=e[d].filename.split(".");if(-1<path.indexOf(c[0]))return $("#terms-title").text(e[d].text),{term:c[0],file:e[d].filename}}}}(),g=$("#treelist").easytree({stateChanged:function(a,b,e){if(!l){b=path.replace("github/egret-docs","");b=b.replace("README.md","");k();n(b);var d=window.location.search.substr(1).match(/(^|&)home=([^&]*)(&|$)/);1==(null!=d?unescape(d[2]):null)?(b=g.getAllNodes(),m(b)):$("#doc-user-edit").attr("href","https://github.com/egret-labs/egret-docs/tree/master/"+b)}$("#treelist").show();if(e)if(e.isFolder)a:{a||(a=g.getAllNodes());b=e.id.split("_");var d="",c;for(c in b)if(0==c)d=b[c];else if(c==b.length-1)break;else d+="_"+b[c];if(b=g.getNode(d))for(c in b.children)b.children[c].id!==e.id&&b.children[c].isExpanded&&!0===b.children[c].isFolder&&g.toggleNode(b.children[c].id);else for(c=0;c<a.length;c++)if(b=e.id,!0===a[c].isFolder&&a[c].isExpanded&&(d=a[c].id,b!==d)){g.toggleNode(d);break a}}else h(e)},dataUrl:root+"/config/"+u.file});$("#treelist").css("top");var l=!1,q=!0;$(window).resize(k);$(window).scroll(k);window.addEventListener("popstate",function(a){history.state&&(a=a.state,$("#post_content").html(a.content),document.title=a.title,yx_count_btn(),yx_favorite_btn())},!1);(function(){$(".btn-doc-user").each(function(a){switch($(this).attr("data")){case "sendThumb":$(this).click(function(a){$("#commentType").attr("value",1);$(".comment-form").toggle();$(".btn-doc-user").toggle()});break;case "sendfeedback":$(this).click(function(a){$("#commentType").attr("value",0);$(".comment-form").toggle();$(".btn-doc-user").toggle()})}});$(".btn-doc-cancle").each(function(a){$(this).click(function(a){a.preventDefault();$(".comment-form").toggle();$(".btn-doc-user").toggle()})})})()})();